# Lefthook configuration
# See: https://github.com/evilmartians/lefthook

# pre-commit: コミット前にBiomeでリント・フォーマットを自動実行
pre-commit:
  commands:
    # Biomeでリント＋フォーマット
    # - TS/JS/JSX/TSX: リント + フォーマット
    # - JSON/JSONC: フォーマット
    # - 自動修正可能なエラーを修正し、変更をステージングに追加
    biome:
      glob: "{apps,packages}/**/*.{js,ts,jsx,tsx,json,jsonc}"
      run: bunx biome check --write --diagnostic-level=error --no-errors-on-unmatched --files-ignore-unknown=true {staged_files}
      stage_fixed: true

# pre-push: 無効化（将来的にGitHub Actionsに移行予定）
# pre-push:
#   commands:
#     # Biomeリントチェック（修正はしない、エラーがあれば失敗）
#     # コミット済みのコード全体をチェック
#     lint-check:
#       run: bun run lint
#
#     # テスト実行
#     # test:
#     #   run: bun run test
#
#     # ビルド確認
#     build:
#       run: bun run build
